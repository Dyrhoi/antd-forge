---
title: Form Composition
icon: Layers
description: Compose reusable form sections useFormInstance.
sources:
  useForm: /docs/hooks/useForm
  useFormInstance: /docs/hooks/useFormInstance
---

So far we've seen how to utilize `useForm` to create type-safe forms with creator methods like `FormItem`.
This will get you far when building simple, single-use, one component forms.

However, in real world applications forms sometimes get quite complex.
Sometimes sections of forms needs to be reusable across different forms, or even within the same form. In these cases, composing forms from smaller parts is a great way to keep your code maintainable and DRY.

## Breaking up forms into smaller components

### Dynamic inheritance

Say we have two entities, `Person` and `Company`. This could be represented with the following Zod schemas:

```ts
import { z } from "zod";

const addressSchema = z.object({
  street: z.string().min(1, "Street is required"),
  city: z.string().min(1, "City is required"),
  zipCode: z.string().min(1, "Zip code is required"),
});

const personSchema = z.object({
  // ommited for brevity
  address: addressSchema,
});

const companySchema = z.object({
  // ommited for brevity
  address: addressSchema,
});
```

We notice that both `Person` and `Company` has an `address` field with the same structure, and in this example, it's actually using the same database table behind the scenes.
To avoid duplicating the address fields in both forms, we can create a reusable `AddressSubForm` component that can be used in both the `PersonForm` and `CompanyForm`.

```tsx tab="PersonForm.tsx"
import { personSchema } from "./schemas";

export function PersonForm() {
  const { formProps, FormItem } = useForm({
    validator: personSchema,
    onFinish: (values) => {
      // Handle form submission
    },
  });

  return (
    <Form layout="vertical">
      <FormItem name={["firstName"]} label="First Name">
        <Input />
      </FormItem>
      <FormItem name={["lastName"]} label="Last Name">
        <Input />
      </FormItem>
      <FormItem name={["ssn"]} label="SSN">
        <Input />
      </FormItem>

      {/* Reusable Address Sub-Form */}
      <FormItem name={["address"]} label="Address">
        <AddressSubForm />
      </FormItem>

      <Button type="primary" htmlType="submit">
        Submit
      </Button>
    </Form>
  );
}
```

```tsx tab="CompanyForm.tsx"
import { companySchema } from "./schemas";

export function CompanyForm() {
  const { formProps, FormItem } = useForm({
    validator: companySchema,
    onFinish: (values) => {
      // Handle form submission
    },
  });

  return (
    <Form layout="vertical">
      <FormItem name={["companyName"]} label="Company Name">
        <Input />
      </FormItem>
      <FormItem name={["companyNo"]} label="Registration Number">
        <Input />
      </FormItem>

      {/* Reusable Address Sub-Form */}
      <FormItem name={["address"]} label="Address">
        <AddressSubForm />
      </FormItem>

      <Button type="primary" htmlType="submit">
        Submit
      </Button>
    </Form>
  );
}
```

```tsx tab="AddressSubForm.tsx"
import type { Address } from "./schemas";
import { useFormInstance } from "antd-forge";

export function AddressSubForm() {
  const { FormItem } = useFormInstance<Address>({ inherit: true });

  return (
    <>
      <FormItem name={["street"]} label="Street">
        <Input />
      </FormItem>
      <FormItem name={["city"]} label="City">
        <Input />
      </FormItem>
      <FormItem name={["zipCode"]} label="Zip Code">
        <Input />
      </FormItem>
    </>
  );
}
```

```ts tab="schemas.ts"
import { z } from "zod";

const addressSchema = z.object({
  street: z.string().min(1, "Street is required"),
  city: z.string().min(1, "City is required"),
  zipCode: z.string().min(1, "Zip code is required"),
});
export type Address = z.infer<typeof addressSchema>;

const personSchema = z.object({
  firstName: z
    .string("First name is required")
    .min(3, "First name must minimum be 3 characters"),
  lastName: z
    .string("Last name is required")
    .min(3, "Last name must minimum be 3 characters"),
  ssn: z.string("SSN is required").min(1, "SSN is required"),
  address: addressSchema,
});
export type Person = z.infer<typeof personSchema>;

const companySchema = z.object({
  companyName: z
    .string("Company name is required")
    .min(3, "Company name must minimum be 3 characters"),
  companyNo: z
    .string("Registration number is required")
    .min(1, "Registration number is required"),
  address: addressSchema,
});
export type Company = z.infer<typeof companySchema>;

export { personSchema, companySchema, addressSchema };
```
